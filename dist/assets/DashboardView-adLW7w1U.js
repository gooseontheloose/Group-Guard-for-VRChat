import{c as V,u as R,r as u,R as Y,j as e,a as H,m as _,b as D,M as L,G as S,N as j,d as J,e as B}from"./index-CTtjqtkG.js";const Q=V(t=>({logs:[],isLoading:!1,error:null,fetchLogs:async l=>{t({isLoading:!0,error:null});try{const n=await window.electron.getGroupAuditLogs(l);n.success?t({logs:n.logs||[],isLoading:!1}):t({error:n.error,isLoading:!1})}catch(n){t({error:n.message||"Failed to fetch logs",isLoading:!1})}}}));function A({type:t,enabled:l=!0}){const{selectedGroup:n,fetchGroupRequests:d,fetchGroupBans:c,fetchGroupMembers:g,fetchGroupInstances:a,isRequestsLoading:o,isBansLoading:m,isMembersLoading:p,isInstancesLoading:r,getLastFetchedAt:f}=R(),h=Y[t],[w,b]=u.useState(()=>{const y=f(t);if(y===0)return Math.floor(h/1e3);const I=h-(Date.now()-y);return Math.max(1,Math.ceil(I/1e3))}),s=u.useRef(null),x=u.useRef(null),C=u.useRef(!1),z=t==="requests"?o:t==="bans"?m:t==="members"?p:r,v=u.useCallback(async()=>{if(n)switch(t){case"requests":await d(n.id);break;case"bans":await c(n.id);break;case"members":await g(n.id,0);break;case"instances":await a(n.id);break}},[n,t,d,c,g,a]),W=u.useCallback(()=>{v(),b(Math.floor(h/1e3))},[v,h]);return u.useEffect(()=>{if(!n||!l)return;const y=f(t),I=Date.now()-y;return(y===0||I>=h)&&(C.current||(C.current=!0,v())),()=>{C.current=!1}},[n?.id,l,t,h,v,f,n]),u.useEffect(()=>{if(s.current&&(clearInterval(s.current),s.current=null),x.current&&(clearInterval(x.current),x.current=null),!(!n||!l))return s.current=setInterval(()=>{v(),b(Math.floor(h/1e3))},h),x.current=setInterval(()=>{b(y=>y<=1?Math.floor(h/1e3):y-1)},1e3),()=>{s.current&&(clearInterval(s.current),s.current=null),x.current&&(clearInterval(x.current),x.current=null)}},[n,l,h,v]),{secondsUntilRefresh:w,isRefreshing:z,refreshNow:W,lastFetchedAt:f(t)}}function q(t){if(t<60)return`${t}s`;const l=Math.floor(t/60),n=t%60;return`${l}:${n.toString().padStart(2,"0")}`}const M=({secondsUntilRefresh:t,isRefreshing:l,onRefreshClick:n,label:d="Refresh"})=>{const c=t>0,g=l||c;return e.jsxs("button",{onClick:n,disabled:g,style:{display:"inline-flex",alignItems:"center",gap:"3px",background:"transparent",border:"none",padding:"2px 4px",fontSize:"0.65rem",color:"var(--color-text-dim)",cursor:g?"default":"pointer",transition:"color 0.15s ease",opacity:c?.5:.7},onMouseEnter:a=>{g||(a.currentTarget.style.color="var(--color-primary)",a.currentTarget.style.opacity="1")},onMouseLeave:a=>{a.currentTarget.style.color="var(--color-text-dim)",a.currentTarget.style.opacity=c?"0.5":"0.7"},title:t>0?`${d} in ${q(t)}`:"Click to refresh",children:[e.jsx("svg",{width:"9",height:"9",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:l?"spin 0.8s linear infinite":"none"},children:e.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"})}),(t>0||l)&&e.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.6rem",letterSpacing:"-0.02em"},children:l?"â€¢â€¢â€¢":q(t)}),e.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},K=()=>{const{connected:t,connecting:l}=H();return e.jsx(_.div,{title:t?"Real-time updates active":l?"Connecting...":"Offline",style:{width:8,height:8,borderRadius:"50%",backgroundColor:t?"#22c55e":l?"#f59e0b":"#6b7280",boxShadow:t?"0 0 6px rgba(34, 197, 94, 0.6)":"none"},animate:t?{scale:[1,1.2,1]}:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})},X=({isOpen:t,onClose:l})=>{const{members:n,selectedGroup:d,fetchGroupMembers:c,isMembersLoading:g}=R(),{openProfile:a}=D(),[o,m]=u.useState("");u.useEffect(()=>{t&&d&&c(d.id)},[t,d,c]);const p=n.filter(r=>r.user.displayName.toLowerCase().includes(o.toLowerCase()));return e.jsxs(L,{isOpen:t,onClose:l,title:`Members (${d?.memberCount||0})`,width:"800px",children:[e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("input",{type:"text",placeholder:"Search members...",value:o,onChange:r=>m(r.target.value),style:{width:"100%",padding:"10px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white"}})}),e.jsxs("div",{style:{height:"60vh",overflowY:"auto"},children:[g&&n.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"Loading members..."}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"10px"},children:p.map(r=>e.jsxs(S,{style:{padding:"10px",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},onClick:()=>a(r.userId),children:[e.jsx("img",{src:r.user.userIcon||r.user.currentAvatarThumbnailImageUrl,alt:r.user.displayName,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}),e.jsxs("div",{style:{overflow:"hidden"},children:[e.jsx("div",{style:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.user.displayName}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:r.membershipStatus})]})]},r.id))}),!g&&p.length===0&&e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"No members found."})]})]})},Z=({isOpen:t,onClose:l})=>{const{requests:n,selectedGroup:d,fetchGroupRequests:c,isRequestsLoading:g}=R(),{openProfile:a}=D();return u.useEffect(()=>{t&&d&&c(d.id)},[t,d,c]),e.jsx(L,{isOpen:t,onClose:l,title:`Join Requests (${n.length})`,width:"600px",children:e.jsx("div",{style:{height:"60vh",overflowY:"auto",display:"flex",flexDirection:"column",gap:"10px"},children:g?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"Loading requests..."}):n.length>0?n.map(o=>e.jsxs(S,{style:{padding:"15px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",cursor:"pointer"},onClick:()=>a(o.user.id),children:[e.jsx("img",{src:o.user.userIcon||o.user.currentAvatarThumbnailImageUrl,alt:o.user.displayName,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"},children:[o.user.displayName,(o.user.ageVerified||o.user.tags?.includes("system_age_verified"))&&e.jsx("span",{style:{background:"#fbbf24",color:"black",fontSize:"0.6rem",padding:"1px 4px",borderRadius:"4px",fontWeight:"800"},children:"18+"})]}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:["Requested: ",new Date(o.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(j,{variant:"ghost",style:{color:"#ef4444"},children:"Deny"}),e.jsx(j,{variant:"primary",children:"Accept"})]})]},o.id)):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"No pending requests."})})})},ee=({isOpen:t,onClose:l})=>{const{bans:n,selectedGroup:d,fetchGroupBans:c,isBansLoading:g}=R(),{openProfile:a}=D(),[o,m]=u.useState("");u.useEffect(()=>{t&&d&&c(d.id)},[t,d,c]);const p=n.filter(r=>r.user.displayName.toLowerCase().includes(o.toLowerCase()));return e.jsxs(L,{isOpen:t,onClose:l,title:`Active Bans (${n.length})`,width:"700px",children:[e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("input",{type:"text",placeholder:"Search banned users...",value:o,onChange:r=>m(r.target.value),style:{width:"100%",padding:"10px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white"}})}),e.jsx("div",{style:{height:"60vh",overflowY:"auto",display:"flex",flexDirection:"column",gap:"10px"},children:g?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"Loading bans..."}):p.length>0?p.map(r=>e.jsxs(S,{style:{padding:"15px",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:"3px solid #ef4444"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",cursor:"pointer"},onClick:()=>a(r.user.id),children:[e.jsx("img",{src:r.user.userIcon||r.user.currentAvatarThumbnailImageUrl,alt:r.user.displayName,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",filter:"grayscale(100%)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",color:"#ef4444"},children:r.user.displayName}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:["Banned: ",new Date(r.createdAt).toLocaleDateString()]})]})]}),e.jsx(j,{variant:"ghost",children:"Unban"})]},r.id)):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"No active bans found."})})]})},te=({isOpen:t,onClose:l})=>{const{instances:n,isInstancesLoading:d,selectedGroup:c,fetchGroupInstances:g}=R(),[a,o]=u.useState(null);u.useEffect(()=>{t&&c&&g(c.id)},[t,c,g]);const m=()=>{c&&g(c.id)},p=s=>{const x=s.location||s.id||"";console.log("Joining instance:",x)},r=s=>{o(s)},f=()=>{if(a){const s=a.location||a.id||"";console.log("Closing instance:",s),o(null)}},h=s=>{if(!s)return"US";const x=s.match(/~region\(([^)]+)\)/);return x?x[1].toUpperCase():"US"},w=s=>s.n_users||s.userCount||s.memberCount||0,b=s=>s.capacity||s.world?.capacity||40;return e.jsxs(e.Fragment,{children:[e.jsx(L,{isOpen:t,onClose:l,title:`Active Instances (${n.length})`,width:"600px",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(j,{size:"sm",onClick:m,disabled:d,children:d?"Loading...":"Refresh"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",maxHeight:"50vh",overflowY:"auto",paddingRight:"4px"},children:d&&n.length===0?e.jsx("div",{style:{padding:"3rem",textAlign:"center",color:"var(--color-text-dim)"},children:"Loading instances..."}):n.length>0?n.map((s,x)=>e.jsxs(S,{style:{padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("div",{style:{width:"120px",height:"80px",borderRadius:"var(--border-radius)",background:"#1a1a2e",backgroundImage:s.world?.thumbnailImageUrl?`url(${s.world.thumbnailImageUrl})`:s.world?.imageUrl?`url(${s.world.imageUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center",flexShrink:0,border:"1px solid var(--border-color)"}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"1rem",fontWeight:600,color:"var(--color-text-main)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.world?.name||s.displayName||"Unknown World"}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",marginBottom:"0.5rem"},children:["by ",s.world?.authorName||"Unknown"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.75rem",color:"var(--color-text-dim)"},children:[e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",background:"rgba(255,255,255,0.05)",padding:"2px 8px",borderRadius:"4px"},children:["ðŸ‘¥ ",w(s)," / ",b(s)]}),e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",background:"rgba(255,255,255,0.05)",padding:"2px 8px",borderRadius:"4px"},children:["ðŸŒ ",h(s.location)]}),e.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",background:"rgba(100, 150, 255, 0.15)",padding:"2px 8px",borderRadius:"4px",color:"#8ab4ff",textTransform:"capitalize"},children:s.groupAccessType||s.type||"Public"}),s.ageGate&&e.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",background:"rgba(255, 180, 50, 0.2)",padding:"2px 8px",borderRadius:"4px",color:"#ffc045",fontWeight:600},children:"ðŸ”ž 18+"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--border-color)"},children:[e.jsx(j,{size:"sm",onClick:()=>p(s),style:{flex:1},children:"Join Instance"}),e.jsx(j,{size:"sm",variant:"secondary",onClick:()=>r(s),style:{flex:1},children:"Close Instance"})]})]},s.id||s.location||x)):e.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"var(--color-text-dim)",background:"rgba(255,255,255,0.02)",borderRadius:"var(--border-radius)",border:"1px dashed var(--border-color)"},children:[e.jsx("div",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:"No Active Instances"}),e.jsx("div",{style:{fontSize:"0.85rem",opacity:.7},children:"There are no active group instances at this time."})]})})]})}),e.jsx(L,{isOpen:!!a,onClose:()=>o(null),title:"Close Instance",width:"400px",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{color:"var(--color-text-main)",marginBottom:"0.5rem",fontSize:"1rem"},children:"Are you sure you want to close this instance?"}),e.jsx("p",{style:{color:"var(--color-primary)",fontWeight:600,marginBottom:"0.5rem"},children:a?.world?.name||"Unknown World"}),e.jsxs("p",{style:{color:"var(--color-text-dim)",fontSize:"0.85rem",marginBottom:"1.5rem"},children:["This will disconnect all ",w(a||{})," users."]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[e.jsx(j,{variant:"secondary",onClick:()=>o(null),children:"Cancel"}),e.jsx(j,{variant:"danger",onClick:f,children:"Close Instance"})]})]})})]})},re=()=>e.jsxs("div",{title:"Synced with your local VRChat logs.",style:{display:"inline-flex",alignItems:"center",gap:"6px",background:"rgba(34, 197, 94, 0.1)",padding:"4px 8px",borderRadius:"12px",border:"1px solid rgba(34, 197, 94, 0.2)",cursor:"help",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.background="rgba(34, 197, 94, 0.2)",t.currentTarget.style.borderColor="rgba(34, 197, 94, 0.4)"},onMouseLeave:t=>{t.currentTarget.style.background="rgba(34, 197, 94, 0.1)",t.currentTarget.style.borderColor="rgba(34, 197, 94, 0.2)"},children:[e.jsxs("div",{style:{position:"relative",width:"6px",height:"6px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",backgroundColor:"#22c55e",borderRadius:"50%",position:"absolute",top:0,left:0}}),e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#22c55e",borderRadius:"50%",zIndex:-1,animation:"pulse 2s infinite ease-in-out"}}),e.jsx("style",{children:`
           @keyframes pulse {
             0% { transform: scale(1); opacity: 1; }
             50% { transform: scale(3); opacity: 0; }
             100% { transform: scale(1); opacity: 0; }
           }
         `})]}),e.jsx("span",{style:{fontSize:"0.65rem",fontWeight:700,color:"#22c55e",letterSpacing:"0.5px"},children:"LIVE"})]}),se=()=>{const{currentWorldName:t,currentWorldId:l,currentLocation:n,players:d}=J(),{instances:c,myGroups:g}=R(),a=n?c.find(r=>!!(r.location===n||r.worldId&&r.instanceId&&`${r.worldId}:${r.instanceId}`===n||r.worldId===l)):null,o=a?.world?.name||t||"Unknown World",m=Object.keys(d).length,p=Object.values(d).sort((r,f)=>f.joinTime-r.joinTime);return!l&&!t?e.jsx(S,{style:{height:"100%",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:e.jsxs("div",{style:{textAlign:"center",color:"var(--color-text-dim)"},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--color-text-secondary)",fontSize:"1.1rem",marginBottom:"0.5rem"},children:"Waiting for VRChat..."}),e.jsx("div",{style:{fontSize:"0.9rem"},children:"Join a world to see live data"})]})}):e.jsxs(S,{style:{height:"100%",padding:"1rem",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px",marginBottom:"8px",flex:"0 0 auto"},children:[e.jsx("span",{style:{fontSize:"0.65rem",color:"var(--color-accent)",letterSpacing:"0.5px",fontWeight:600},children:"CURRENT INSTANCE"}),e.jsx(re,{}),a&&e.jsxs("span",{style:{fontSize:"0.6rem",background:"rgba(255,255,255,0.1)",border:"1px solid var(--color-primary)",color:"var(--color-primary)",padding:"2px 8px",borderRadius:"12px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px",boxShadow:"0 0 10px rgba(var(--color-primary-rgb), 0.2)",whiteSpace:"nowrap",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:[a.group?.name||g.find(r=>r.id===a.ownerId)?.name||"GROUP"," INSTANCE"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem",flex:"0 0 auto"},children:[e.jsxs("div",{style:{flex:"1 1 auto",minWidth:0,display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"white",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2},title:o,children:o}),e.jsx("div",{style:{fontSize:"0.7rem",color:"rgba(255,255,255,0.4)",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:l})]}),e.jsxs("div",{style:{textAlign:"right",flex:"0 0 auto",marginTop:"-4px"},children:[e.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--color-primary)",lineHeight:1},children:m}),e.jsx("div",{style:{fontSize:"0.65rem",color:"var(--color-text-dim)",fontWeight:600},children:"PLAYERS"})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"0.5rem",display:"flex",flexDirection:"column",gap:"2px",minHeight:0},children:[p.map(r=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 8px",borderRadius:"4px",background:"rgba(255,255,255,0.03)",fontSize:"0.9rem"},children:[e.jsx("span",{style:{fontWeight:500},children:r.displayName}),e.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)"},children:new Date(r.joinTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]},r.displayName)),p.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"1rem",fontSize:"0.8rem",color:"rgba(255,255,255,0.3)",marginTop:"auto",marginBottom:"auto"},children:"No players detected"})]})]})},ne=["group.user.join","group.user.leave","group.user.ban","group.user.unban","group.user.kick","group.invite.accept"],ie=u.memo(()=>{const{selectedGroup:t,requests:l,bans:n,instances:d,isRequestsLoading:c,isBansLoading:g,isInstancesLoading:a,fetchGroupMembers:o,isMembersLoading:m}=R(),{logs:p,fetchLogs:r,isLoading:f}=Q(),h=H(),w=A({type:"instances"}),b=A({type:"requests"}),s=A({type:"bans"}),[x,C]=u.useState(!1),[z,v]=u.useState(!1),[W,y]=u.useState(!1),[I,G]=u.useState(!1),[T,U]=u.useState(0),N=B.useRef(0),E=B.useRef(!1),F=B.useRef(null);u.useEffect(()=>{t&&(F.current!==t.id&&(E.current=!1,N.current=0,F.current=t.id),E.current||(o(t.id,0),E.current=!0))},[t,o]),u.useEffect(()=>{if(!t||p.length===0)return;const i=N.current;p.length>i&&i>0&&p.slice(0,p.length-i).some(P=>ne.some($=>P.eventType?.includes($)||P.type?.includes($)))&&o(t.id,0),N.current=p.length},[p,t,o]),u.useEffect(()=>{if(T>0){const i=setTimeout(()=>{U(k=>k-1)},1e3);return()=>clearTimeout(i)}},[T]);const O=i=>{i?.stopPropagation(),!(T>0||!t)&&(o(t.id,0),U(30))};return u.useEffect(()=>{t&&r(t.id)},[t,r]),e.jsx(e.Fragment,{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",gap:"1.5rem",paddingBottom:"20px"},children:[e.jsxs(S,{style:{flex:"0 0 auto",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{minWidth:"200px"},children:[e.jsx("h1",{className:"text-gradient",style:{fontSize:"1.8rem",margin:0,fontWeight:800,lineHeight:1.2},children:t?.name||"Dashboard"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",marginTop:"4px"},children:"COMMAND CENTER"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flex:1,justifyContent:"flex-end",flexWrap:"wrap"},children:[e.jsxs("div",{onClick:()=>C(!0),style:{background:"rgba(255,255,255,0.05)",padding:"0.8rem",borderRadius:"8px",minWidth:"130px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:i=>i.currentTarget.style.background="rgba(255,255,255,0.1)",onMouseLeave:i=>i.currentTarget.style.background="rgba(255,255,255,0.05)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("small",{style:{color:"var(--color-primary)",fontSize:"0.7rem",fontWeight:600},children:"MEMBERS"}),h.connected&&e.jsx(K,{})]}),e.jsx(M,{secondsUntilRefresh:T,isRefreshing:m,onRefreshClick:O})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:t?.memberCount})]}),e.jsxs("div",{onClick:()=>G(!0),style:{background:"rgba(255,255,255,0.05)",padding:"0.8rem",borderRadius:"8px",minWidth:"130px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:i=>i.currentTarget.style.background="rgba(255,255,255,0.1)",onMouseLeave:i=>i.currentTarget.style.background="rgba(255,255,255,0.05)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.2rem"},children:[e.jsx("small",{style:{color:"#4cc9f0",fontSize:"0.7rem",fontWeight:600},children:"INSTANCES"}),e.jsx(M,{secondsUntilRefresh:w.secondsUntilRefresh,isRefreshing:w.isRefreshing,onRefreshClick:i=>{i?.stopPropagation(),w.refreshNow()}})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:a?"...":d.length})]}),e.jsxs("div",{onClick:()=>v(!0),style:{background:"rgba(255,255,255,0.05)",padding:"0.8rem",borderRadius:"8px",minWidth:"130px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:i=>i.currentTarget.style.background="rgba(255,255,255,0.1)",onMouseLeave:i=>i.currentTarget.style.background="rgba(255,255,255,0.05)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.2rem"},children:[e.jsx("small",{style:{color:"var(--color-accent)",fontSize:"0.7rem",fontWeight:600},children:"REQUESTS"}),e.jsx(M,{secondsUntilRefresh:b.secondsUntilRefresh,isRefreshing:b.isRefreshing,onRefreshClick:i=>{i?.stopPropagation(),b.refreshNow()}})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:c?"...":l.length})]}),e.jsxs("div",{onClick:()=>y(!0),style:{background:"rgba(255,255,255,0.05)",padding:"0.8rem",borderRadius:"8px",minWidth:"130px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:i=>i.currentTarget.style.background="rgba(255,255,255,0.1)",onMouseLeave:i=>i.currentTarget.style.background="rgba(255,255,255,0.05)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.2rem"},children:[e.jsx("small",{style:{color:"#ef4444",fontSize:"0.7rem",fontWeight:600},children:"BANS"}),e.jsx(M,{secondsUntilRefresh:s.secondsUntilRefresh,isRefreshing:s.isRefreshing,onRefreshClick:i=>{i?.stopPropagation(),s.refreshNow()}})]}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:g?"...":n.length})]})]})]}),e.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"minmax(0, 7fr) minmax(0, 5fr)",gap:"1.5rem",minHeight:0},children:[e.jsxs(S,{style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.8rem",flex:"0 0 auto",paddingBottom:"0.8rem",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:700},children:"Live Audit Feed"}),e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#22c55e",boxShadow:"0 0 8px #22c55e"}})]}),e.jsx(j,{size:"sm",variant:"ghost",onClick:()=>t&&r(t.id),disabled:f,children:f?"SYNCING...":"REFRESH"})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",paddingRight:"4px",minHeight:0},children:p.length===0&&!f?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--color-text-dim)",fontSize:"0.9rem",fontStyle:"italic"},children:"-- No visible spectrum events --"}):p.map(i=>e.jsxs("div",{style:{padding:"0.75rem 0.5rem",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.85rem",transition:"background 0.2s"},onMouseEnter:k=>k.currentTarget.style.background="rgba(255,255,255,0.03)",onMouseLeave:k=>k.currentTarget.style.background="transparent",children:[e.jsx("div",{style:{width:"8px",height:"8px",flex:"0 0 auto",borderRadius:"50%",background:i.eventType?.includes("ban")?"#ef4444":i.eventType?.includes("join")?"#22c55e":"var(--color-accent)",boxShadow:i.eventType?.includes("ban")?"0 0 8px rgba(239, 68, 68, 0.4)":"none"}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:"4px"},children:[e.jsx("span",{style:{fontWeight:"600",color:"var(--color-primary)",fontSize:"0.9rem"},children:i.actorDisplayName}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-dim)",fontFamily:"monospace"},children:new Date(i.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),e.jsx("div",{style:{color:"rgba(255,255,255,0.8)",fontSize:"0.85rem"},children:i.description||i.eventType})]})]},i.id))})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:e.jsx(se,{})})]}),e.jsx(X,{isOpen:x,onClose:()=>C(!1)}),e.jsx(Z,{isOpen:z,onClose:()=>v(!1)}),e.jsx(ee,{isOpen:W,onClose:()=>y(!1)}),e.jsx(te,{isOpen:I,onClose:()=>G(!1)})]})})});ie.displayName="DashboardView";export{ie as DashboardView};
