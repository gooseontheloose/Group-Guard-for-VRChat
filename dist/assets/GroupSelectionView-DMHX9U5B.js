import{r as o,u as j,c as C,d as N,j as e,m as t,N as I,A as x}from"./index-D5E0sjoJ.js";const f="_container_1an2w_3",k="_header_1an2w_23",L="_title_1an2w_35",$="_subtitle_1an2w_45",E="_grid_1an2w_57",R="_gridCompact_1an2w_75",G="_gridLarge_1an2w_87",P="_cardPanel_1an2w_99",S="_cardLive_1an2w_133",U="_cardCompact_1an2w_169",W="_groupIcon_1an2w_183",B="_groupName_1an2w_201",F="_cardLarge_1an2w_235",V="_overlayContent_1an2w_267",A="_groupIconPlaceholder_1an2w_329",D="_liveBadge_1an2w_437",M="_banner_1an2w_499",z="_bannerFallback_1an2w_519",O="_metaRow_1an2w_537",T="_shortCode_1an2w_551",K="_memberCount_1an2w_561",a={container:f,header:k,title:L,subtitle:$,grid:E,gridCompact:R,gridLarge:G,cardPanel:P,cardLive:S,cardCompact:U,groupIcon:W,groupName:B,cardLarge:F,overlayContent:V,groupIconPlaceholder:A,liveBadge:D,banner:M,bannerFallback:z,metaRow:O,shortCode:T,memberCount:K},q={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},_={hidden:{opacity:0,scale:.9},show:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:24}}},H=o.memo(()=>{const{myGroups:m,fetchMyGroups:s,selectGroup:u,enterRoamingMode:h,isLoading:w,error:y}=j(),{currentWorldId:v,currentWorldName:p,instanceImageUrl:c}=C(),[l,g]=N.useState(null),[i,b]=o.useState(window.innerWidth>1100);return o.useEffect(()=>{const n=()=>b(window.innerWidth>1100);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),o.useEffect(()=>{s()},[s]),o.useEffect(()=>((async()=>{const r=await window.electron.instance.getCurrentGroup();g(r)})(),window.electron.instance.onGroupChanged(r=>{g(r)})),[]),w?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(t.h2,{className:"text-gradient",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"Scanning Group Frequencies..."})}):y?e.jsxs("div",{style:{textAlign:"center",marginTop:"4rem"},children:[e.jsx("h2",{style:{color:"#ef4444"},children:"Connection Error"}),e.jsx("div",{style:{textAlign:"left",background:"rgba(225, 29, 72, 0.1)",padding:"1rem",borderRadius:"8px",border:"1px solid rgba(225, 29, 72, 0.2)",margin:"1rem auto",maxWidth:"600px",overflow:"auto",maxHeight:"300px"},children:e.jsx("pre",{style:{margin:0,overflow:"visible",whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"},children:y})}),e.jsx(I,{onClick:()=>s(),style:{marginTop:"1rem"},children:"Retry"})]}):e.jsxs("div",{className:a.container,children:[e.jsxs("div",{className:a.header,children:[e.jsx("h1",{className:`${a.title} text-gradient`,children:"SELECT GROUP"}),e.jsx("p",{className:a.subtitle,children:"Identify target for moderation protocols."})]}),e.jsxs(t.div,{variants:q,initial:"hidden",animate:"show",className:`${a.grid} ${i?a.gridLarge:a.gridCompact}`,layout:!0,children:[v&&(!l||!m.some(n=>n.id===l))&&e.jsx(t.div,{variants:_,initial:"hidden",animate:"show",layout:!0,children:e.jsxs("div",{className:`${a.cardPanel} ${i?a.cardLarge:a.cardCompact}`,onClick:()=>h(),onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),h())},role:"button",tabIndex:0,style:{outline:"none",borderColor:"var(--color-primary)"},children:[e.jsxs(x,{children:[i&&c&&e.jsx(t.div,{className:a.banner,style:{backgroundImage:`url(${c})`},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),i&&!c&&e.jsx(t.div,{className:a.bannerFallback,initial:{opacity:0},animate:{opacity:.2},exit:{opacity:0}})]}),e.jsx(t.div,{layoutId:"roaming-badge",initial:{scale:0},animate:{scale:1},className:a.liveBadge,style:{background:"#22c55e",color:"black",fontWeight:900},children:"ROAMING"}),e.jsx(t.div,{layoutId:"icon-roaming",className:a.groupIconPlaceholder,style:{border:"2px solid #22c55e",boxShadow:"0 0 15px rgba(34, 197, 94, 0.5)",color:"#22c55e",background:"rgba(34, 197, 94, 0.1)"},children:e.jsx("div",{style:{width:12,height:12,background:"currentColor",borderRadius:"50%",boxShadow:"0 0 10px currentColor"}})}),i?e.jsxs(t.div,{className:a.overlayContent,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},children:[e.jsx(t.div,{className:a.groupName,layoutId:"name-roaming",children:p||"Unknown World"}),e.jsxs("div",{className:a.metaRow,children:[e.jsx("span",{className:a.shortCode,style:{color:"#22c55e",borderColor:"#22c55e"},children:"LIVE"}),e.jsx("span",{className:a.memberCount,style:{color:"#86efac"},children:"Viewing Live Data"})]})]}):e.jsx(t.div,{className:a.groupName,layoutId:"name-roaming",children:p||"Unknown World"})]})},"roaming-card"),m.map(n=>{const d=n.id===l;return e.jsx(t.div,{variants:_,layout:!0,children:e.jsxs("div",{className:`${a.cardPanel} ${i?a.cardLarge:a.cardCompact} ${d?a.cardLive:""}`,onClick:()=>u(n),onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),u(n))},role:"button",tabIndex:0,style:{outline:"none"},children:[e.jsxs(x,{children:[i&&n.bannerUrl&&e.jsx(t.div,{className:a.banner,style:{backgroundImage:`url(${n.bannerUrl})`},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),i&&!n.bannerUrl&&e.jsx(t.div,{className:a.bannerFallback,initial:{opacity:0},animate:{opacity:.2},exit:{opacity:0}})]}),d&&e.jsx(t.div,{layoutId:`live-${n.id}`,initial:{scale:0},animate:{scale:1},className:a.liveBadge,children:"LIVE"}),n.iconUrl?e.jsx(t.img,{layoutId:`icon-${n.id}`,src:n.iconUrl,className:a.groupIcon,alt:""}):e.jsx(t.div,{layoutId:`icon-${n.id}`,className:a.groupIconPlaceholder,children:n.shortCode||n.name.substring(0,2).toUpperCase()}),i?e.jsxs(t.div,{className:a.overlayContent,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},children:[e.jsx(t.div,{className:a.groupName,layoutId:`name-${n.id}`,title:n.name,children:n.name}),e.jsxs("div",{className:a.metaRow,children:[e.jsx("span",{className:a.shortCode,children:n.shortCode}),e.jsxs("span",{className:a.memberCount,children:[n.memberCount," Members"]})]})]}):e.jsx(t.div,{className:a.groupName,layoutId:`name-${n.id}`,title:n.name,children:n.name})]})},n.id)})]})]})});H.displayName="GroupSelectionView";export{H as GroupSelectionView};
